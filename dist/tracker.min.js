/*! param-tracker v2.0.1 | https://github.com/jonasmzsouza/param-tracker */
(()=>{var d=class{constructor(t={}){let e={acceptOrigins:[],acceptFormIds:[],ignorePathnames:[],ignoreClasses:[],ignoreProtocols:["mailto:","tel:"],dataItems:[],attributes:[],includeParams:["utm_source","utm_medium","utm_campaign","utm_id","utm_term","utm_content"],excludeParams:[]};if(!t.acceptOrigins||t.acceptOrigins.length===0)throw new Error("ParamTracker: The 'acceptOrigins' property is mandatory in the configuration.");this.config={...e,...t,acceptOrigins:this.sanitizeStringArray(t.acceptOrigins),acceptFormIds:this.sanitizeStringArray(t.acceptFormIds||[]),ignorePathnames:this.mergeUnique(e.ignorePathnames,t.ignorePathnames),ignoreClasses:this.mergeUnique(e.ignoreClasses,t.ignoreClasses),ignoreProtocols:this.mergeUnique(e.ignoreProtocols,t.ignoreProtocols),dataItems:this.mergeUnique(e.dataItems,t.dataItems),attributes:this.mergeUnique(e.attributes,t.attributes),excludeParams:this.mergeUnique(e.excludeParams,t.excludeParams)},document.addEventListener("DOMContentLoaded",()=>this.init())}init=()=>{this.sanitizeLinks(),this.bindLinkEvents(),this.bindButtonEvents(),this.restoreScrollHash()};sanitizeStringArray=(t=[])=>Array.isArray(t)?[...new Set(t.filter(e=>typeof e=="string"&&e.trim()!=="").map(e=>e.trim()))]:[];mergeUnique=(t=[],e=[])=>this.sanitizeStringArray([...t,...e]);sanitizeLinks=()=>{document.querySelectorAll("a[href]").forEach(t=>{if(!this.shouldHandleLink(t))return;let e=new URL(t.href),r=e.hash||"",n=this.sanitizeAndMergeParams(e.origin+e.pathname,e.search,"",this.config.excludeParams)+r;n!==t.href&&(t.href=n)})};isFileUrl=t=>{let e=/\.(pdf|docx?|xlsx?|pptx?|zip|rar|mp3|mp4|avi|wmv|mov|txt|csv|jpe?g|png|gif|svg|webp)(\?.*)?$/i;try{let{pathname:r,search:i,hash:n}=new URL(t),s=r+i+n;return e.test(s)}catch{return!1}};shouldHandleLink=t=>{let{ignoreClasses:e,ignoreProtocols:r,dataItems:i,attributes:n}=this.config,s=t.getAttribute("href")||"";if(e.some(o=>t.classList.contains(o))||r.some(o=>s.startsWith(o))||isFileUrl(s))return!1;for(let o of n){let a=t.getAttribute(o);if(a&&i.includes(a))return!1}return!0};isAcceptedOrigin=t=>{try{let{hostname:e}=new URL(t);return this.config.acceptOrigins.some(r=>{let i=r.trim().toLowerCase();return e===i||e.endsWith(`.${i}`)})}catch{return!1}};handleLinkClick=(t,e)=>{let r=e.origin,i=e.pathname,n=e.getAttribute("target"),s=e.hash,o=r+i;if(this.isAcceptedOrigin(r)&&!this.config.ignorePathnames.some(a=>i.includes(a))){let{href:a,isHashSymbolPresent:c}=this.generateHref(e,r,i,s);this.handleLinkRedirect(t,c,a,o,s,n)}};sanitizeAndMergeParams=(t,e="",r="",i=[])=>{try{let n=this.normalizeQueryString(e),s=new URLSearchParams((r||"").replace(/^[?&]+/,""));for(let[a,c]of n.entries()){let h=a.toLowerCase();this.config.includeParams.includes(h)&&s.has(a)||s.set(a,c)}i.forEach(a=>s.delete(a));let o=s.toString();return o?`${t}?${o}`:t}catch(n){return console.error("[sanitizeAndMergeParams] erro:",n),t}};normalizeQueryString=t=>{let e=(t||"").replace(/^[?&]+/,""),r=new URLSearchParams;for(;e;){let[n,s]=e.split(/\?(.+)/s),o=new URLSearchParams(n);for(let[a,c]of o)r.append(a,c);if(!s)break;e=s}let i=Array.from(r.entries());for(let[n,s]of i)if(s.includes("%3F")||s.includes("%3f")){let o=decodeURIComponent(s);if(o.includes("?")){let[a,c]=o.split(/\?(.+)/s);r.set(n,a);let h=new URLSearchParams(c);for(let[l,u]of h)r.has(l)||r.append(l,u)}}return r};generateHref=(t,e,r,i)=>{let{excludeParams:n}=this.config,s=e+r,o=new URL(t.href),a=this.sanitizeAndMergeParams(s,o.search,window.location.search,n),c=!!i;return{href:a+(c?i:""),isHashSymbolPresent:c}};handleLinkRedirect=(t,e,r,i,n,s)=>{t.preventDefault();let o=window.location.origin+window.location.pathname;if(e&&i===o&&n){document.querySelector(n)?.scrollIntoView({behavior:"smooth"});return}s==="_blank"?window.open(r,"_blank"):window.location.href=r};removeURLParams=t=>{let e=new URLSearchParams(t);return this.config.excludeParams.forEach(r=>e.delete(r)),e.toString()?"?"+e.toString():""};addParamsToForm=t=>{if(!(t instanceof HTMLFormElement))return;let e=window.location.hash,r=e.includes("?")?"?"+e.split("?")[1]:window.location.search;if(!r)return;let i=new URLSearchParams(this.removeURLParams(r));for(let[n,s]of i)if(!t.querySelector(`input[name="${CSS.escape(n)}"][value="${CSS.escape(s)}"]`)){let a=document.createElement("input");a.type="hidden",a.name=n,a.value=s,t.appendChild(a)}};bindLinkEvents=()=>{document.addEventListener("click",t=>{let e=t.target.closest("a");!e||!this.shouldHandleLink(e)||this.handleLinkClick(t,e)})};bindButtonEvents=()=>{document.addEventListener("click",t=>{let e=t.target.closest("button, input[type='submit']");if(!e)return;let r=e.closest("form");if(!r)return;this.config.acceptFormIds.some(n=>r.id.includes(n))&&this.addParamsToForm(r)})};restoreScrollHash=()=>{window.location.hash&&document.querySelector(window.location.hash)?.scrollIntoView({behavior:"smooth"})}};})();
